<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>

	// Get stations list from rata.digitraffic.fi and show them in dropdownlist (two dropdownlists for departure and arrive)

	var urlStations = "https://rata.digitraffic.fi/api/v1/metadata/stations";
	var xmlhttpStations = new XMLHttpRequest();
	xmlhttpStations.open("GET", urlStations, true);
	xmlhttpStations.send();

	xmlhttpStations.onreadystatechange = function() {
		if (xmlhttpStations.readyState == 4 && xmlhttpStations.status == 200) {
			// Receive the response as JSON and parse it into a JS variable
			jsonStations = JSON.parse(xmlhttpStations.responseText);

			// Now received JSON can be used as a JS variable
			// Stored in data variable

			var stationDataDeparture = jsonStations;
	// Loop that run through JSON data array and all data will be collected to out variable
			var stationOut = "<form>";
			stationOut += '<select>';

			for (var i=0; i < stationDataDeparture.length; i++) {
		// For each loop round, we will create a new table for <tr> -tag and append (+=)
		// the data to existing out variable
		// For each cell, we will output data fields from JSON
				stationOut += '<option  id="departure-station">' + stationDataDeparture[i].stationShortCode + " " + stationDataDeparture[i].stationName + '</option>';
			}

			stationOut += '</select>';
			stationOut+="</form>";

			document.getElementById("station-data-departure").innerHTML = stationOut;

			var stationDataArrive = jsonStations;
	// Loop that run through JSON data array and all data will be collected to out variable
			var stationOut = "<form>";
			stationOut += '<select>';

			for (var i=0; i < stationDataArrive.length; i++) {
		// For each loop round, we will create a new table for <tr> -tag and append (+=)
		// the data to existing out variable
		// For each cell, we will output data fields from JSON
				stationOut += '<option  id="arrive-station">' + stationDataArrive[i].stationShortCode + " " + stationDataArrive[i].stationName + '</option>';
			}

			stationOut += '</select>';
			stationOut += "</form>";

			document.getElementById("station-data-arrive").innerHTML = stationOut;
			document.getElementById("chosen-departure-station").innerHTML = document.getElementById("departure-station").value;
			document.getElementById("chosen-arrive-station").innerHTML = document.getElementById("arrive-station").value;
	}
}

</script>
</head>
<body>
	<div class="container-fluid">
			<h1 style="margin:100px">Trains <small> some information about trains.</small></h1>
	</div>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
			</div>
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    </div>
  </div>
</nav>
<header class="header header--transparent">
	<div class="container">
	<div class="page-header">
		<div class="row">
			<div class="col-xs-6">
			</div>
		</div>
			<div>
					<div class="col-xs">
					</div>
				</div>
			<div id="station-data-departure">
					<div class="col-xs">
							<p id="chosen-departure-station"></p>
				</div>
			</div>
			<div id="station-data-arrive">
					<div class="col-xs">
							<p id="chosen-arrive-station"></p>
					</div>
				</div>
			<div>
					<div class="col-xs">
						<form>
							<input id="get-trains-button" type="button" value="Search">
						</form>
					</div>
			</div>
			<div id="trains-data">
					<div class="col-xs">
						<div id="content">
						</div>
					</div>
			</div>
	</div>
	</div>
</body>
</html>
