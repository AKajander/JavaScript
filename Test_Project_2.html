<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" language="javascript">

var departureStation = "HKI";
var arriveStation = "AVP";

var urlTrains = "https://rata.digitraffic.fi/api/v1/live-trains/station/"+departureStation+"/"+arriveStation+"?include_nonstopping=false&limit=1";
var xmlHttpTrains = new XMLHttpRequest();
xmlHttpTrains.open("GET", urlTrains, true);
xmlHttpTrains.send();

xmlHttpTrains.onreadystatechange = function() {
	if (xmlHttpTrains.readyState == 4 && xmlHttpTrains.status == 200) {
		// Receive the response as JSON and parse it into a JS variable
		jsonTrains = JSON.parse(xmlHttpTrains.responseText);

		// Now received JSON can be used as a JS variable
		// Stored in data variable

		var trainData = jsonTrains;
		// Loop that run through JSON data array and all data will be collected to out variable

		var trainOut = "<ul>";

		for (var i=0; i < trainData.length; i++) {
			// For each loop round, we will create a new table for <tr> -tag and append (+=)
			// the data to existing out variable
			// For each cell, we will output data fields from JSON
			trainOut += '<li>' + trainData[i].commuterLineId + '</li>';

			trainOut += '</li>';
		}
		
		trainOut+="</ul>";

		document.getElementById("trains-data").innerHTML = trainOut;
	}
}

</script>
</head>
<body>
<header class="header header--transparent">
<div class="content">
	<div class="row">
		<div class="col-xs-6">
		</div>
	</div>
</div>
<body>
<content>
	<section>
		<div>
			<div class="row">
				<div class="col-xs">
				</div>
			</div>
		</div>
	</section>
	<section>
		<div id="station-data-departure">
			<div class="row">
				<div class="col-xs">
					<form>

					</form>
				</div>
			</div>
		</div>
	</section>
	<section>
		<div id="station-data-arrive">
			<div class="row">
				<div class="col-xs">
					<form>
					</form>
				</div>
			</div>
		</div>
	</section>
	<section>
		<div>
			<div class="row">
				<div class="col-xs">
					<form>
						<button type="button" value="Search" onclick="searchTrains()">Search</button>
					</form>
				</div>
			</div>
		</div>
	</section>
	<section>
		<div id="trains-data">
			<div class="row">
				<div class="col-xs">
					<div>
					</div>
				</div>
			</div>
		</div>
	</section>
</content>
</body>
</html>
